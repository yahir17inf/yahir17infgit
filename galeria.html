<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Galer√≠a del Colegio</title>
  <style>
    :root{
      --bg:#fafafa;
      --bg-grad-1:#fff1f1;
      --bg-grad-2:#ffffff;
      --text:#1f2937; /* slate-800 */
      --muted:#6b7280; /* gray-500 */
      --red:#b91c1c;   /* red-700 */
      --red-500:#ef4444; /* red-500 */
      --ring:#fecaca;  /* red-200 */
      --card:#ffffff;
      --border:#e5e7eb; /* gray-200 */
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial;
      color:var(--text);
      background:
        radial-gradient(1600px 500px at 20% 0%, var(--bg-grad-1) 0%, transparent 60%),
        radial-gradient(1600px 500px at 80% 0%, var(--bg-grad-1) 0%, transparent 60%),
        var(--bg);
    }
    .wrap{max-width:1200px;margin:0 auto;padding:20px}
    header{padding-top:24px;text-align:center}
    header img.logo{width:84px;height:auto;object-fit:contain;display:block;margin:0 auto 10px}
    h1{margin:.25rem 0;font-size:clamp(28px,6vw,56px);line-height:1.05;color:#7f1d1d; /* deep red */ text-shadow:0 1px 0 #fff}
    p.lead{margin:0 auto 18px;max-width:760px;color:var(--muted)}

    /* Barra de acciones (solo Inicio) */
    .actions{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;margin:10px 0 18px}
    .btn{appearance:none;border:none;cursor:pointer;display:inline-flex;align-items:center;gap:10px;padding:12px 16px;border-radius:14px;font-weight:700}
    .btn.primary{background:linear-gradient(180deg,#ef4444,#b91c1c);color:#fff;box-shadow:0 8px 24px rgba(239,68,68,.25)}
    .btn.primary:active{transform:translateY(1px)}

    /* Chips de categor√≠as */
    .chips{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin:8px 0 22px}
    .chip{background:#fff;border:2px solid var(--red-500);color:var(--red-500);padding:8px 14px;border-radius:999px;cursor:pointer;font-weight:600}
    .chip.activo{background:var(--red-500);color:#fff}

    /* Grid */
    .grid{display:grid;gap:14px;grid-template-columns:repeat(2,1fr);max-width:1200px;margin:0 auto 40px}
    @media(min-width:640px){.grid{grid-template-columns:repeat(3,1fr)}}
    @media(min-width:900px){.grid{grid-template-columns:repeat(4,1fr)}}
    @media(min-width:1160px){.grid{grid-template-columns:repeat(5,1fr)}}

    .card{position:relative;background:var(--card);border:1px solid var(--border);border-radius:16px;overflow:hidden}
    .thumb{width:100%;aspect-ratio:1/1;object-fit:cover;background:#f3f4f6}
    .cap{display:none}

    /* Lightbox */
    .lightbox{position:fixed;inset:0;background:rgba(0,0,0,.8);display:none;align-items:center;justify-content:center;z-index:50;padding:20px}
    .lightbox.open{display:flex}
    .lightbox img{max-width:90vw;max-height:90vh;object-fit:contain;border-radius:12px;box-shadow:0 10px 40px rgba(0,0,0,.6)}

    footer{color:var(--muted);text-align:center;padding:24px 0}
    .search{display:flex;justify-content:center;margin:8px 0 24px}
    .search input{width:min(520px,92%);padding:12px 14px;border:1px solid var(--border);border-radius:999px;outline:none}
    .search input:focus{box-shadow:0 0 0 4px var(--ring);}
  </style>
</head>
<body>
  <header class="wrap">
    <img class="logo" src="./assets/escudo.png" alt="Escudo del Instituto" onerror="this.style.display='none'">
    <h1>Galer√≠a del Colegio</h1>
    <p class="lead">Momentos que inspiran: aprendizaje, cultura, deporte y comunidad.</p>

    <div class="actions">
      <button class="btn primary" id="btn-inicio">üè† Inicio</button>
    </div>

    <div class="chips">
      <button class="chip activo" data-cat="todas">Todas</button>
      <button class="chip" data-cat="banda">Banda marcial</button>
      <button class="chip" data-cat="deportes">Deportes</button>
      <button class="chip" data-cat="viajes">Viajes</button>
      <button class="chip" data-cat="cultura">Cultura</button>
      <button class="chip" data-cat="celebraciones">Celebraciones</button>
      <button class="chip" data-cat="trabajo">Trabajo educativo social</button>
    </div>

    <div class="search">
      <input id="q" type="search" placeholder="(opcional) Buscar por n√∫mero ‚Äî ej: 17" />
    </div>
  </header>

  <main class="wrap">
    <div id="galeria-grid" class="grid"></div>
  </main>

  <footer class="wrap">¬© 2025 CEMNG Dionisio de Herrera</footer>

  <script>
    /* ================== Config ================== */
    const BASE_PATH = "./img"; // Carpeta donde guardas 1.jpg..48.jpg
    const EXT       = "jpg";   // Cambia a png/webp si quieres
    const TOTAL     = 48;       // Hasta qu√© n√∫mero cargar

    // Rangos por categor√≠a
    const RANGES = {
      banda: [1, 10],
      deportes: [11, 16],
      viajes: [17, 24],
      celebraciones: [25, 32],
      cultura: [33, 39],
      trabajo: [40, 48]
    };

    /* ================== Helpers ================== */
    const $  = (s, c=document)=>c.querySelector(s);
    const $$ = (s, c=document)=>Array.from(c.querySelectorAll(s));
    const grid   = $("#galeria-grid");
    const chips  = $$('[data-cat]');
    const inputQ = $("#q");

    function categoryOf(n){
      for(const [cat,[a,b]] of Object.entries(RANGES)){
        if(n>=a && n<=b) return cat;
      }
      return null;
    }

    function cardFor(n){
      const cat = categoryOf(n);
      const fig = document.createElement("figure");
      fig.className = "card";

      const img = document.createElement("img");
      img.className = "thumb";
      img.loading = "lazy";
      img.decoding = "async";
      img.alt = `${cat ?? 'sin-categoria'}-${n}`;
      img.src = `${BASE_PATH}/${n}.${EXT}`;
      img.onerror = function(){
        this.style.opacity = .25; this.style.filter = 'grayscale(1)'; this.title = 'No encontrada: '+this.src;
      };
      img.style.cursor = 'zoom-in';
      img.addEventListener('click', ()=> openLightbox(n));

      fig.appendChild(img);
      return fig;
    }

    function render(filterCat="todas", query=""){
      if(!grid) return;
      grid.innerHTML = "";
      const frag = document.createDocumentFragment();

      // Normaliza query: si coincide con una categor√≠a, usamos esa
      const q = (query || "").toLowerCase().trim();
      const catFromQuery = ({
        "todas":"todas",
        "todo":"todas",
        "banda":"banda",
        "banda marcial":"banda",
        "deporte":"deportes",
        "deportes":"deportes",
        "viaje":"viajes",
        "viajes":"viajes",
        "cultura":"cultura",
        "celebracion":"celebraciones",
        "celebraciones":"celebraciones",
        "trabajo":"trabajo",
        "trabajo educativo social":"trabajo"
      })[q];
      if(catFromQuery){ filterCat = catFromQuery; }

      const qn = parseInt(q,10);

      for(let n=1; n<=TOTAL; n++){
        const cat = categoryOf(n);
        const matchCat = (filterCat==="todas" || filterCat===cat);
        const matchQ   = (!q || Number.isNaN(qn) ? true : n===qn);
        if(matchCat && matchQ){ frag.appendChild(cardFor(n)); }
      }
      grid.appendChild(frag);
    }

    // ===== Lightbox =====
    let lightbox, lbImg;
    function ensureLightbox(){
      if(lightbox) return;
      lightbox = document.createElement('div');
      lightbox.className = 'lightbox';
      lbImg = document.createElement('img');
      lightbox.appendChild(lbImg);
      document.body.appendChild(lightbox);
      lightbox.addEventListener('click', ()=> lightbox.classList.remove('open'));
      document.addEventListener('keydown', (e)=>{
        if(e.key==='Escape' && lightbox.classList.contains('open')) lightbox.classList.remove('open');
      });
    }
    function openLightbox(n){
      ensureLightbox();
      lbImg.src = `${BASE_PATH}/${n}.${EXT}`;
      lightbox.classList.add('open');
    }

    // Filtros por chip
    chips.forEach(btn=>{
      btn.addEventListener('click', ()=>{
        chips.forEach(b=>b.classList.remove('activo'));
        btn.classList.add('activo');
        const cat = btn.getAttribute('data-cat') || 'todas';
        render(cat, inputQ.value.trim());
      });
    });

    // B√∫squeda por n√∫mero o palabra de categor√≠a (opcional)
    inputQ && inputQ.addEventListener('input', ()=>{
      let q = inputQ.value.trim();
      const map = {
        'banda':'banda','banda marcial':'banda',
        'deporte':'deportes','deportes':'deportes',
        'viaje':'viajes','viajes':'viajes',
        'cultura':'cultura',
        'celebracion':'celebraciones','celebraciones':'celebraciones',
        'trabajo':'trabajo','trabajo educativo social':'trabajo',
        'todas':'todas','todo':'todas'
      };
      const key = q.toLowerCase();
      const active = $('.chip.activo');
      let cat = active ? active.getAttribute('data-cat') : 'todas';
      if(map[key]){
        cat = map[key];
        const targetBtn = document.querySelector(`[data-cat="${cat}"]`);
        if(targetBtn){
          chips.forEach(b=>b.classList.remove('activo'));
          targetBtn.classList.add('activo');
        }
      }
      render(cat, q);
    });

    // Bot√≥n Inicio (ajusta el comportamiento a tu sitio)
    const btnInicio = $('#btn-inicio');
    if(btnInicio){
      btnInicio.addEventListener('click', ()=>{
        // Si tienes index.html usa: window.location.href = 'index.html';
        history.back();
      });
    }

    // Inicial: todas
    document.addEventListener('DOMContentLoaded', ()=> render('todas'));
  </script>
</body>
</html>
